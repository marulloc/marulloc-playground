

# Monorepo 브랜치전략
---

- Trunk Based 전략 
- Husky 


# yarn workspace
---
### 왜 yarn workspace 선택했나 

또한 모노레포를 구축하겠다 결심했을 시점에는 여러 프로젝트를 한 곳에 모으고 code artifact에서 방치된 외부 중앙 라이브러리나 레거시 프로젝트를 모노레포에 통합시켜 관리의 용이성을 확보하는 것이 목표였으며 

yarn berry를 사용하는 것으로 가닥이 잡혀 다른 툴을 따로 사용하지 않고 yarn worspace를 사용하는 것으로 결론지었습니다. 


# Turborepo 
---
### 왜 Turborepo 사용했어요 

이건 모노레포 툴끼리 고려한 것은 아님
배포 플랫폼을 선택하는 과정에서 Turborepo를 선택하는 것으로 결정됨

이때 Vercel을 선택하게되었는데 그 이유는 
- geoID : 당시 Netflix와 같이 접속 주소에 따라 접근할 수 있는 스토어의 국가를 제한해야 했으며 
- 무료 : 프로토타입 개발이다 보니 무료로 배포할 수 있는 Vercel을 선택하게 되었는데요 

`Vercel이 yarn berry에 대해선 정적 빌드만 지원`  pnpm으로 패키지 매니저를 바꿨으며 
모노레포 툴에 대해서 고수준의 기능을 요구하지 않다보니yarn berry쓰는 김에 yarn workspace 를 쓰고 있었습니다. 그래서 pnpm을 쓰니 차라리 Vercel에서 제공해주는 pnpm과 turborepo 세트를 사용하게 되었습니다. 



# Turborepo vs Workspaces
---
- **Yarn Workspaces**는 주로 의존성 관리와 패키지 간 의존성 연결에 초점을 맞춘 모노레포 관리 도구입니다. 설정이 간단하며, Yarn 패키지 매니저와 긴밀하게 통합됩니다.
- **Turborepo**는 빌드 성능 최적화(빌드 캐싱, 증분 빌드, 원격 캐싱)와 복잡한 작업 파이프라인 구성에 초점을 맞춘 고급 모노레포 빌드 도구입니다.

# yarn Workspaces
---
- **의존성 통합 관리:** Yarn Workspaces는 하나의 `yarn.lock` 파일을 사용하여 모노레포 내의 모든 패키지의 의존성을 통합 관리합니다. 이를 통해 의존성 설치 과정을 최적화하고, 중복된 패키지의 다운로드를 방지합니다.
- **패키지 간 의존성 연결:** Workspaces는 모노레포 내의 패키지 간에 로컬 의존성을 쉽게 연결할 수 있게 해 줍니다. 즉, 하나의 패키지가 다른 패키지를 직접 참조하고, 로컬 변경사항이 실시간으로 반영되도록 지원합니다.
- 프로젝트의 `package.json` 파일에 Workspaces 설정을 추가하는 것으로 쉽게 사용할 수 있으며, Yarn이 자동으로 의존성 관리와 패키지 간 연결을 처리합니다.

### Turborepo 설명해주세요 

- **빌드 캐싱과 증분 빌드:** Turborepo는 빌드 캐싱과 증분 빌드를 통해 모노레포의 빌드 속도를 최적화합니다. 이미 수행된 빌드 작업의 결과를 재사용하여 불필요한 작업을 줄이고, 변경된 부분에 대해서만 빌드를 실행합니다.
- **작업 파이프라인:** Turborepo는 복잡한 작업 파이프라인을 구성할 수 있게 해 줍니다. 이를 통해 의존성에 기반한 태스크 실행 순서를 정의하고, 병렬 실행을 최적화할 수 있습니다.
- **원격 캐싱:** Turborepo는 원격 캐싱을 지원하여, 팀원 간에 빌드 캐시를 공유할 수 있습니다. 이는 CI/CD 환경과 팀 내에서의 개발 속도를 더욱 향상시킵니다.